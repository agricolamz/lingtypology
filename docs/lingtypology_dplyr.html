<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="George Moroz" />


<title>lingtypology and dplyr</title>

<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="site_libs/htmlwidgets-0.9/htmlwidgets.js"></script>
<link href="site_libs/leaflet-0.7.7/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-0.7.7/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<link href="site_libs/leaflet-label-0.2.2/leaflet.label.css" rel="stylesheet" />
<script src="site_libs/leaflet-label-0.2.2/leaflet.label.js"></script>
<script src="site_libs/Proj4Leaflet-0.7.2/proj4-compressed.js"></script>
<script src="site_libs/Proj4Leaflet-0.7.2/proj4leaflet.js"></script>
<script src="site_libs/leaflet-binding-1.1.0/leaflet.js"></script>
<link href="site_libs/leaflet-minimap-3.3.1/Control.MiniMap.min.css" rel="stylesheet" />
<script src="site_libs/leaflet-minimap-3.3.1/Control.MiniMap.min.js"></script>
<script src="site_libs/leaflet-minimap-3.3.1/Minimap-binding.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 54px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 59px;
  margin-top: -59px;
}

.section h2 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h3 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h4 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h5 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h6 {
  padding-top: 59px;
  margin-top: -59px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">lingtypology</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">installation</a>
</li>
<li>
  <a href="lingtypology_glottolog_functions.html">Glottolog functions</a>
</li>
<li>
  <a href="lingtypology_creating_maps.html">creating maps</a>
</li>
<li>
  <a href="lingtypology_db_API.html">databases API</a>
</li>
<li>
  <a href="lingtypology_dplyr.html">lingtypology and dplyr</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore"><code>lingtypology</code> and <code>dplyr</code></h1>
<h4 class="author"><em><a href="mailto:agricolamz@gmail.com">George Moroz</a></em></h4>

</div>


<p>It is possible to use <code>dplyr</code> functions and pipes with <code>lingtypology</code>. It is widely used, so I will give some examples, how to use it with the<code>lingtypology</code> package. Using query “list of languages csv” I found Vincent Garnier’s <a href="https://github.com/forxer/languages-list">languages-list repository</a>. Let’s download and map all the languages from that set. First download the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://goo.gl/GgscBE&quot;</span>)
<span class="kw">tail</span>(new_data)</code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["X639.1"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["X639.2.T"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["X639.2.B"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["Language.name"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["Native.name"],"name":[5],"type":["fctr"],"align":["left"]}],"data":[{"1":"xh","2":"xho","3":"xho","4":"Xhosa","5":"isiXhosa","_rn_":"180"},{"1":"yi","2":"yid","3":"yid","4":"Yiddish","5":"ייִדיש","_rn_":"181"},{"1":"yo","2":"yor","3":"yor","4":"Yoruba","5":"Yorùbá","_rn_":"182"},{"1":"za","2":"zha","3":"zha","4":"Zhuang, Chuang","5":"Saɯ cueŋƅ, Saw cuengh","_rn_":"183"},{"1":"zh","2":"zho","3":"chi","4":"Chinese","5":"中文 (Zhōngwén), 汉语, 漢語","_rn_":"184"},{"1":"zu","2":"zul","3":"zul","4":"Zulu","5":"isiZulu","_rn_":"185"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>As we see, some values of the <code>Language.name</code> variable contain more than one language name. Some of the names probably have different names in our database. Imagine that we want to map all languages from Africa. So that the following examples work correctly, use <code>library(dplyr)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
new_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Language.name =</span> <span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>, Language.name)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.glottolog</span>(Language.name) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">area.lang</span>(Language.name) <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Language.name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>()</code></pre></div>
<div id="htmlwidget-a2513d605a4c3a8e2f01" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-a2513d605a4c3a8e2f01">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addCircleMarkers","args":[[12.2281066667,-22,6.34756,11.708182,12.04008,6.46061,11.1512744444,-21.02312,4.62705,0.66884,1.403245,-8.2816,-17.64172,-1.56770666667,6.78584333333,-17.20849,4.778704,-26,-8.2560525,15.335942,-24.36797,-23.57541,-22.187955,15.25336,-31.03886,7.153455,-25.330502],[41.8082933333,30,-1.33254,39.543456,-9.98949,0.814975,8.78039888889,20.565535,7.23441,32.15153,19.782905,25.89183,19.163085,29.6441333333,20.1702033333,29.75725,45.152856,31.5,37.6240325,38.926563,24.75867,31.8105375,29.952345,-15.3829733333,28.07686,3.672245,31.351174],5.5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1,"dashArray":null},null,null,["<a href='http://glottolog.org/resource/languoid/iso/aar' target='_blank'>Afar<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/afr' target='_blank'>Afrikaans<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/aka' target='_blank'>Akan<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/amh' target='_blank'>Amharic<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bam' target='_blank'>Bambara<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ewe' target='_blank'>Ewe<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/hau' target='_blank'>Hausa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/her' target='_blank'>Herero<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ibo' target='_blank'>Igbo<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lug' target='_blank'>Ganda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lin' target='_blank'>Lingala<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lub' target='_blank'>Luba-Katanga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ndo' target='_blank'>Ndonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kin' target='_blank'>Kinyarwanda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sag' target='_blank'>Sango<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sna' target='_blank'>Shona<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/som' target='_blank'>Somali<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ssw' target='_blank'>Swati<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/swh' target='_blank'>Swahili<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tir' target='_blank'>Tigrinya<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tsn' target='_blank'>Tswana<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tso' target='_blank'>Tsonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ven' target='_blank'>Venda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/wol' target='_blank'>Wolof<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/xho' target='_blank'>Xhosa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/yor' target='_blank'>Yoruba<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/zul' target='_blank'>Zulu<\/a><br>"],null,null,null,null]},{"method":"addCircleMarkers","args":[[12.2281066667,-22,6.34756,11.708182,12.04008,6.46061,11.1512744444,-21.02312,4.62705,0.66884,1.403245,-8.2816,-17.64172,-1.56770666667,6.78584333333,-17.20849,4.778704,-26,-8.2560525,15.335942,-24.36797,-23.57541,-22.187955,15.25336,-31.03886,7.153455,-25.330502],[41.8082933333,30,-1.33254,39.543456,-9.98949,0.814975,8.78039888889,20.565535,7.23441,32.15153,19.782905,25.89183,19.163085,29.6441333333,20.1702033333,29.75725,45.152856,31.5,37.6240325,38.926563,24.75867,31.8105375,29.952345,-15.3829733333,28.07686,3.672245,31.351174],5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"fillOpacity":1,"dashArray":null},null,null,["<a href='http://glottolog.org/resource/languoid/iso/aar' target='_blank'>Afar<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/afr' target='_blank'>Afrikaans<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/aka' target='_blank'>Akan<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/amh' target='_blank'>Amharic<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bam' target='_blank'>Bambara<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ewe' target='_blank'>Ewe<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/hau' target='_blank'>Hausa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/her' target='_blank'>Herero<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ibo' target='_blank'>Igbo<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lug' target='_blank'>Ganda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lin' target='_blank'>Lingala<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lub' target='_blank'>Luba-Katanga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ndo' target='_blank'>Ndonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kin' target='_blank'>Kinyarwanda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sag' target='_blank'>Sango<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sna' target='_blank'>Shona<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/som' target='_blank'>Somali<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ssw' target='_blank'>Swati<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/swh' target='_blank'>Swahili<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tir' target='_blank'>Tigrinya<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tsn' target='_blank'>Tswana<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tso' target='_blank'>Tsonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ven' target='_blank'>Venda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/wol' target='_blank'>Wolof<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/xho' target='_blank'>Xhosa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/yor' target='_blank'>Yoruba<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/zul' target='_blank'>Zulu<\/a><br>"],null,null,{"clickable":false,"noHide":false,"direction":"right","opacity":1,"offset":[12,-15],"textsize":"10px","textOnly":true,"style":{"font-size":"14px"},"zoomAnimation":true,"className":""},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[-31.03886,15.335942],"lng":[-15.3829733333,45.152856]}},"evals":[],"jsHooks":[]}</script>
<p>We start with a dataframe, here a <code>new_data</code>. First we remove spaces at the end of each string. Then we check, whether the language names are in the glottolog database. Then we select only rows that contain languages of Africa. Then we select the <code>Language.name</code> variable. And the last line maps all selected languages.</p>
<p>By default, the values that came from the pipe are treated as the first argument of a function. But when there are some additional arguments, point sign specify what exact position should be piped to. Let’s produce the same map with a minimap.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Language.name =</span> <span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>, Language.name)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.glottolog</span>(Language.name) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">area.lang</span>(Language.name) <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Language.name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>(., <span class="dt">minimap =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div id="htmlwidget-5ee14e756e69f624683c" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5ee14e756e69f624683c">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addCircleMarkers","args":[[12.2281066667,-22,6.34756,11.708182,12.04008,6.46061,11.1512744444,-21.02312,4.62705,0.66884,1.403245,-8.2816,-17.64172,-1.56770666667,6.78584333333,-17.20849,4.778704,-26,-8.2560525,15.335942,-24.36797,-23.57541,-22.187955,15.25336,-31.03886,7.153455,-25.330502],[41.8082933333,30,-1.33254,39.543456,-9.98949,0.814975,8.78039888889,20.565535,7.23441,32.15153,19.782905,25.89183,19.163085,29.6441333333,20.1702033333,29.75725,45.152856,31.5,37.6240325,38.926563,24.75867,31.8105375,29.952345,-15.3829733333,28.07686,3.672245,31.351174],5.5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1,"dashArray":null},null,null,["<a href='http://glottolog.org/resource/languoid/iso/aar' target='_blank'>Afar<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/afr' target='_blank'>Afrikaans<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/aka' target='_blank'>Akan<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/amh' target='_blank'>Amharic<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bam' target='_blank'>Bambara<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ewe' target='_blank'>Ewe<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/hau' target='_blank'>Hausa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/her' target='_blank'>Herero<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ibo' target='_blank'>Igbo<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lug' target='_blank'>Ganda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lin' target='_blank'>Lingala<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lub' target='_blank'>Luba-Katanga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ndo' target='_blank'>Ndonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kin' target='_blank'>Kinyarwanda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sag' target='_blank'>Sango<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sna' target='_blank'>Shona<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/som' target='_blank'>Somali<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ssw' target='_blank'>Swati<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/swh' target='_blank'>Swahili<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tir' target='_blank'>Tigrinya<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tsn' target='_blank'>Tswana<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tso' target='_blank'>Tsonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ven' target='_blank'>Venda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/wol' target='_blank'>Wolof<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/xho' target='_blank'>Xhosa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/yor' target='_blank'>Yoruba<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/zul' target='_blank'>Zulu<\/a><br>"],null,null,null,null]},{"method":"addCircleMarkers","args":[[12.2281066667,-22,6.34756,11.708182,12.04008,6.46061,11.1512744444,-21.02312,4.62705,0.66884,1.403245,-8.2816,-17.64172,-1.56770666667,6.78584333333,-17.20849,4.778704,-26,-8.2560525,15.335942,-24.36797,-23.57541,-22.187955,15.25336,-31.03886,7.153455,-25.330502],[41.8082933333,30,-1.33254,39.543456,-9.98949,0.814975,8.78039888889,20.565535,7.23441,32.15153,19.782905,25.89183,19.163085,29.6441333333,20.1702033333,29.75725,45.152856,31.5,37.6240325,38.926563,24.75867,31.8105375,29.952345,-15.3829733333,28.07686,3.672245,31.351174],5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"fillOpacity":1,"dashArray":null},null,null,["<a href='http://glottolog.org/resource/languoid/iso/aar' target='_blank'>Afar<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/afr' target='_blank'>Afrikaans<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/aka' target='_blank'>Akan<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/amh' target='_blank'>Amharic<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bam' target='_blank'>Bambara<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ewe' target='_blank'>Ewe<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/hau' target='_blank'>Hausa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/her' target='_blank'>Herero<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ibo' target='_blank'>Igbo<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lug' target='_blank'>Ganda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lin' target='_blank'>Lingala<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lub' target='_blank'>Luba-Katanga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ndo' target='_blank'>Ndonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kin' target='_blank'>Kinyarwanda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sag' target='_blank'>Sango<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sna' target='_blank'>Shona<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/som' target='_blank'>Somali<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ssw' target='_blank'>Swati<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/swh' target='_blank'>Swahili<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tir' target='_blank'>Tigrinya<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tsn' target='_blank'>Tswana<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tso' target='_blank'>Tsonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ven' target='_blank'>Venda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/wol' target='_blank'>Wolof<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/xho' target='_blank'>Xhosa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/yor' target='_blank'>Yoruba<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/zul' target='_blank'>Zulu<\/a><br>"],null,null,{"clickable":false,"noHide":false,"direction":"right","opacity":1,"offset":[12,-15],"textsize":"10px","textOnly":true,"style":{"font-size":"14px"},"zoomAnimation":true,"className":""},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addMiniMap","args":[null,null,"bottomright",150,150,19,19,-5,false,false,false,true,false,false,{"color":"#ff7800","weight":1,"clickable":false},{"color":"#000000","weight":1,"clickable":false,"opacity":0,"fillOpacity":0},{"hideText":"Hide MiniMap","showText":"Show MiniMap"},[]]}],"limits":{"lat":[-31.03886,15.335942],"lng":[-15.3829733333,45.152856]}},"evals":[],"jsHooks":[]}</script>
<p>There is also possibility to use <code>lingtypology</code> with other <code>leaflet</code> functions (thanks to <a href="https://github.com/nikopartanen">Niko Partanen</a> for the idea):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(leaflet)
<span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>)</code></pre></div>
<div id="htmlwidget-215195a9e411f2bfa737" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-215195a9e411f2bfa737">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5.5,null,["",""],{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1,"dashArray":null},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,null,null]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5,null,["",""],{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":["#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4"],"fillOpacity":1,"dashArray":null},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"clickable":false,"noHide":false,"direction":"right","opacity":1,"offset":[12,-15],"textsize":"10px","textOnly":true,"style":{"font-size":"14px"},"zoomAnimation":true,"className":""},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"maxHeight":null,"autoPan":true,"keepInView":false,"closeButton":true,"zoomAnimation":true,"closeOnClick":null,"className":""}]}],"limits":{"lat":[44.1415466667,48],"lng":[2,6.82978666667]},"fitBounds":[40,0,50,10]},"evals":[],"jsHooks":[]}</script>
<p>If you add <code>leaflet</code> arguments befor <code>map.feature</code> function, you need to use argument <code>pipe.data = .</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>), <span class="dt">pipe.data =</span> .)</code></pre></div>
<div id="htmlwidget-64537cd97082ff4d0c55" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-64537cd97082ff4d0c55">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"maxHeight":null,"autoPan":true,"keepInView":false,"closeButton":true,"zoomAnimation":true,"closeOnClick":null,"className":""}]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5.5,null,["",""],{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1,"dashArray":null},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,null,null]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5,null,["",""],{"lineCap":null,"lineJoin":null,"clickable":true,"pointerEvents":null,"className":"","stroke":false,"color":["#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4"],"fillOpacity":1,"dashArray":null},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"clickable":false,"noHide":false,"direction":"right","opacity":1,"offset":[12,-15],"textsize":"10px","textOnly":true,"style":{"font-size":"14px"},"zoomAnimation":true,"className":""},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"fitBounds":[40,0,50,10],"limits":{"lat":[44.1415466667,48],"lng":[2,6.82978666667]}},"evals":[],"jsHooks":[]}</script>

<br>
<br>
<br>
<br>
<p> <center> &copy; G. Moroz code on
<a href="https://github.com/ropensci/lingtypology"> GitHub<img src="https://assets-cdn.github.com/images/modules/logos_page/GitHub-Mark.png"  style="width:30px;height:30px;border:0"> </center></p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
