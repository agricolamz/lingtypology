<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="George Moroz" />


<title>lingtypology and other packages</title>

<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="site_libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.0.0.9000/leaflet.js"></script>
<script src="site_libs/leaflet-providers-1.1.17/leaflet-providers.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.0.0.9000/leaflet-providers-plugin.js"></script>
<link href="site_libs/leaflet-minimap-3.3.1/Control.MiniMap.min.css" rel="stylesheet" />
<script src="site_libs/leaflet-minimap-3.3.1/Control.MiniMap.min.js"></script>
<script src="site_libs/leaflet-minimap-3.3.1/Minimap-binding.js"></script>
<link href="site_libs/lfx-draw-1.0.2/lfx-draw-prod.css" rel="stylesheet" />
<script src="site_libs/lfx-draw-1.0.2/lfx-draw-prod.js"></script>
<script src="site_libs/lfx-draw-1.0.2/lfx-draw-bindings.js"></script>
<script src="site_libs/lfx-draw-drag-1.0.2/lfx-draw-drag-prod.js"></script>
<link href="site_libs/lfx-styleeditor-0.1.6/lfx-styleeditor-prod.css" rel="stylesheet" />
<script src="site_libs/lfx-styleeditor-0.1.6/lfx-styleeditor-prod.js"></script>
<script src="site_libs/lfx-styleeditor-0.1.6/lfx-styleeditor-bindings.js"></script>
<link href="site_libs/lfx-fullscreen-1.0.2/lfx-fullscreen-prod.css" rel="stylesheet" />
<script src="site_libs/lfx-fullscreen-1.0.2/lfx-fullscreen-prod.js"></script>
<script src="site_libs/Leaflet.Sync-0.0.5/L.Map.Sync.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 54px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 59px;
  margin-top: -59px;
}

.section h2 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h3 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h4 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h5 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h6 {
  padding-top: 59px;
  margin-top: -59px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">lingtypology</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">installation</a>
</li>
<li>
  <a href="lingtypology_glottolog_functions.html">Glottolog functions</a>
</li>
<li>
  <a href="lingtypology_creating_maps.html">creating maps</a>
</li>
<li>
  <a href="lingtypology_db_API.html">databases API</a>
</li>
<li>
  <a href="lingtypology_dplyr.html">lingtypology and other packages</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore"><code>lingtypology</code> and other packages</h1>
<h4 class="author"><em><a href="mailto:agricolamz@gmail.com">George Moroz</a></em></h4>

</div>


<div id="dplyr-and-magritr" class="section level3">
<h3>1. <code>dplyr</code> and <code>magritr</code> %&gt;%</h3>
<p>It is possible to use <a href="https://github.com/tidyverse/dplyr"><code>dplyr</code></a> functions and pipes with <code>lingtypology</code>. It is widely used, so I will give some examples, how to use it with the<code>lingtypology</code> package. Using query “list of languages csv” I found Vincent Garnier’s <a href="https://github.com/forxer/languages-list">languages-list repository</a>. Let’s download and map all the languages from that set. First download the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://goo.gl/GgscBE&quot;</span>)
<span class="kw">tail</span>(new_data)</code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["X639.1"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["X639.2.T"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["X639.2.B"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["Language.name"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["Native.name"],"name":[5],"type":["fctr"],"align":["left"]}],"data":[{"1":"xh","2":"xho","3":"xho","4":"Xhosa","5":"isiXhosa","_rn_":"180"},{"1":"yi","2":"yid","3":"yid","4":"Yiddish","5":"ייִדיש","_rn_":"181"},{"1":"yo","2":"yor","3":"yor","4":"Yoruba","5":"Yorùbá","_rn_":"182"},{"1":"za","2":"zha","3":"zha","4":"Zhuang, Chuang","5":"Saɯ cueŋƅ, Saw cuengh","_rn_":"183"},{"1":"zh","2":"zho","3":"chi","4":"Chinese","5":"中文 (Zhōngwén), 汉语, 漢語","_rn_":"184"},{"1":"zu","2":"zul","3":"zul","4":"Zulu","5":"isiZulu","_rn_":"185"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>As we see, some values of the <code>Language.name</code> variable contain more than one language name. Some of the names probably have different names in our database. Imagine that we want to map all languages from Africa. So that the following examples work correctly, use <code>library(dplyr)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
new_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Language.name =</span> <span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>, Language.name)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.glottolog</span>(Language.name) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">area.lang</span>(Language.name) <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Language.name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>()</code></pre></div>
<div id="htmlwidget-a2513d605a4c3a8e2f01" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-a2513d605a4c3a8e2f01">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[12.2281066667,-22,6.34756,11.708182,12.04008,6.46061,11.1512744444,-21.02312,4.62705,0.66884,1.403245,-8.2816,-17.64172,-1.56770666667,6.78584333333,-17.20849,4.778704,-26,-8.2560525,15.335942,-24.36797,-23.57541,-22.187955,15.25336,-31.03886,7.153455,-25.330502],[41.8082933333,30,-1.33254,39.543456,-9.98949,0.814975,8.78039888889,20.565535,7.23441,32.15153,19.782905,25.89183,19.163085,29.6441333333,20.1702033333,29.75725,45.152856,31.5,37.6240325,38.926563,24.75867,31.8105375,29.952345,-15.3829733333,28.07686,3.672245,31.351174],5.5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/aar' target='_blank'>Afar<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/afr' target='_blank'>Afrikaans<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/aka' target='_blank'>Akan<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/amh' target='_blank'>Amharic<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bam' target='_blank'>Bambara<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ewe' target='_blank'>Ewe<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/hau' target='_blank'>Hausa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/her' target='_blank'>Herero<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ibo' target='_blank'>Igbo<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lug' target='_blank'>Ganda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lin' target='_blank'>Lingala<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lub' target='_blank'>Luba-Katanga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ndo' target='_blank'>Ndonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kin' target='_blank'>Kinyarwanda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sag' target='_blank'>Sango<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sna' target='_blank'>Shona<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/som' target='_blank'>Somali<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ssw' target='_blank'>Swati<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/swh' target='_blank'>Swahili<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tir' target='_blank'>Tigrinya<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tsn' target='_blank'>Tswana<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tso' target='_blank'>Tsonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ven' target='_blank'>Venda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/wol' target='_blank'>Wolof<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/xho' target='_blank'>Xhosa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/yor' target='_blank'>Yoruba<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/zul' target='_blank'>Zulu<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[12.2281066667,-22,6.34756,11.708182,12.04008,6.46061,11.1512744444,-21.02312,4.62705,0.66884,1.403245,-8.2816,-17.64172,-1.56770666667,6.78584333333,-17.20849,4.778704,-26,-8.2560525,15.335942,-24.36797,-23.57541,-22.187955,15.25336,-31.03886,7.153455,-25.330502],[41.8082933333,30,-1.33254,39.543456,-9.98949,0.814975,8.78039888889,20.565535,7.23441,32.15153,19.782905,25.89183,19.163085,29.6441333333,20.1702033333,29.75725,45.152856,31.5,37.6240325,38.926563,24.75867,31.8105375,29.952345,-15.3829733333,28.07686,3.672245,31.351174],5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/aar' target='_blank'>Afar<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/afr' target='_blank'>Afrikaans<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/aka' target='_blank'>Akan<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/amh' target='_blank'>Amharic<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bam' target='_blank'>Bambara<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ewe' target='_blank'>Ewe<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/hau' target='_blank'>Hausa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/her' target='_blank'>Herero<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ibo' target='_blank'>Igbo<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lug' target='_blank'>Ganda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lin' target='_blank'>Lingala<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lub' target='_blank'>Luba-Katanga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ndo' target='_blank'>Ndonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kin' target='_blank'>Kinyarwanda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sag' target='_blank'>Sango<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sna' target='_blank'>Shona<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/som' target='_blank'>Somali<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ssw' target='_blank'>Swati<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/swh' target='_blank'>Swahili<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tir' target='_blank'>Tigrinya<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tsn' target='_blank'>Tswana<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tso' target='_blank'>Tsonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ven' target='_blank'>Venda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/wol' target='_blank'>Wolof<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/xho' target='_blank'>Xhosa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/yor' target='_blank'>Yoruba<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/zul' target='_blank'>Zulu<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[-31.03886,15.335942],"lng":[-15.3829733333,45.152856]}},"evals":[],"jsHooks":[]}</script>
<p>We start with a dataframe, here a <code>new_data</code>. First we remove spaces at the end of each string. Then we check, whether the language names are in the glottolog database. Then we select only rows that contain languages of Africa. Then we select the <code>Language.name</code> variable. And the last line maps all selected languages.</p>
<p>By default, the values that came from the pipe are treated as the first argument of a function. But when there are some additional arguments, point sign specify what exact position should be piped to. Let’s produce the same map with a minimap.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Language.name =</span> <span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>, Language.name)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.glottolog</span>(Language.name) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">area.lang</span>(Language.name) <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Language.name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>(., <span class="dt">minimap =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div id="htmlwidget-5ee14e756e69f624683c" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5ee14e756e69f624683c">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[12.2281066667,-22,6.34756,11.708182,12.04008,6.46061,11.1512744444,-21.02312,4.62705,0.66884,1.403245,-8.2816,-17.64172,-1.56770666667,6.78584333333,-17.20849,4.778704,-26,-8.2560525,15.335942,-24.36797,-23.57541,-22.187955,15.25336,-31.03886,7.153455,-25.330502],[41.8082933333,30,-1.33254,39.543456,-9.98949,0.814975,8.78039888889,20.565535,7.23441,32.15153,19.782905,25.89183,19.163085,29.6441333333,20.1702033333,29.75725,45.152856,31.5,37.6240325,38.926563,24.75867,31.8105375,29.952345,-15.3829733333,28.07686,3.672245,31.351174],5.5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/aar' target='_blank'>Afar<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/afr' target='_blank'>Afrikaans<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/aka' target='_blank'>Akan<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/amh' target='_blank'>Amharic<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bam' target='_blank'>Bambara<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ewe' target='_blank'>Ewe<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/hau' target='_blank'>Hausa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/her' target='_blank'>Herero<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ibo' target='_blank'>Igbo<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lug' target='_blank'>Ganda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lin' target='_blank'>Lingala<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lub' target='_blank'>Luba-Katanga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ndo' target='_blank'>Ndonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kin' target='_blank'>Kinyarwanda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sag' target='_blank'>Sango<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sna' target='_blank'>Shona<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/som' target='_blank'>Somali<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ssw' target='_blank'>Swati<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/swh' target='_blank'>Swahili<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tir' target='_blank'>Tigrinya<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tsn' target='_blank'>Tswana<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tso' target='_blank'>Tsonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ven' target='_blank'>Venda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/wol' target='_blank'>Wolof<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/xho' target='_blank'>Xhosa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/yor' target='_blank'>Yoruba<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/zul' target='_blank'>Zulu<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[12.2281066667,-22,6.34756,11.708182,12.04008,6.46061,11.1512744444,-21.02312,4.62705,0.66884,1.403245,-8.2816,-17.64172,-1.56770666667,6.78584333333,-17.20849,4.778704,-26,-8.2560525,15.335942,-24.36797,-23.57541,-22.187955,15.25336,-31.03886,7.153455,-25.330502],[41.8082933333,30,-1.33254,39.543456,-9.98949,0.814975,8.78039888889,20.565535,7.23441,32.15153,19.782905,25.89183,19.163085,29.6441333333,20.1702033333,29.75725,45.152856,31.5,37.6240325,38.926563,24.75867,31.8105375,29.952345,-15.3829733333,28.07686,3.672245,31.351174],5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/aar' target='_blank'>Afar<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/afr' target='_blank'>Afrikaans<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/aka' target='_blank'>Akan<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/amh' target='_blank'>Amharic<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bam' target='_blank'>Bambara<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ewe' target='_blank'>Ewe<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/hau' target='_blank'>Hausa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/her' target='_blank'>Herero<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ibo' target='_blank'>Igbo<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lug' target='_blank'>Ganda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lin' target='_blank'>Lingala<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/lub' target='_blank'>Luba-Katanga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ndo' target='_blank'>Ndonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kin' target='_blank'>Kinyarwanda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sag' target='_blank'>Sango<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/sna' target='_blank'>Shona<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/som' target='_blank'>Somali<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ssw' target='_blank'>Swati<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/swh' target='_blank'>Swahili<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tir' target='_blank'>Tigrinya<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tsn' target='_blank'>Tswana<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tso' target='_blank'>Tsonga<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ven' target='_blank'>Venda<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/wol' target='_blank'>Wolof<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/xho' target='_blank'>Xhosa<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/yor' target='_blank'>Yoruba<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/zul' target='_blank'>Zulu<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addMiniMap","args":[null,"OpenStreetMap.Mapnik","bottomright",150,150,19,19,-5,false,false,false,true,false,false,{"color":"#ff7800","weight":1,"clickable":false},{"color":"#000000","weight":1,"clickable":false,"opacity":0,"fillOpacity":0},{"hideText":"Hide MiniMap","showText":"Show MiniMap"},[]]}],"limits":{"lat":[-31.03886,15.335942],"lng":[-15.3829733333,45.152856]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="leaflet-leaflet.extras-mapview-mapedit" class="section level3">
<h3>2. <code>leaflet</code>, <code>leaflet.extras</code>, <code>mapview</code>, <code>mapedit</code></h3>
<p>There is also a possibility to use <code>lingtypology</code> with other <a href="https://github.com/rstudio/leaflet"><code>leaflet</code></a> functions (thanks to <a href="https://github.com/nikopartanen">Niko Partanen</a> for the idea):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(leaflet)
<span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>)</code></pre></div>
<div id="htmlwidget-215195a9e411f2bfa737" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-215195a9e411f2bfa737">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5.5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]}],"limits":{"lat":[44.1415466667,48],"lng":[2,6.82978666667]},"fitBounds":[40,0,50,10,[]]},"evals":[],"jsHooks":[]}</script>
<p>If you add <code>leaflet</code> arguments befor <code>map.feature</code> function, you need to use argument <code>pipe.data = .</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>), <span class="dt">pipe.data =</span> .)</code></pre></div>
<div id="htmlwidget-64537cd97082ff4d0c55" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-64537cd97082ff4d0c55">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"fitBounds":[40,0,50,10,[]],"calls":[{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]},{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5.5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[44.1415466667,48],"lng":[2,6.82978666667]}},"evals":[],"jsHooks":[]}</script>
<p>The other usage of this <code>pipe.data</code> argument is to put there a variable with a <code>leaflet</code> object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>)

<span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>), <span class="dt">pipe.data =</span> m)</code></pre></div>
<div id="htmlwidget-20b6978a6d9356e0546d" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-20b6978a6d9356e0546d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"fitBounds":[40,0,50,10,[]],"calls":[{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]},{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5.5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[44.1415466667,48],"lng":[2,6.82978666667]}},"evals":[],"jsHooks":[]}</script>
<p>If you want to define tiles in <code>leaflet</code> part, you need to change tile argument in <code>map.feature</code> function, because the default value for the <code>tile</code> argument is “OpenStreetMap.Mapnik”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">leaflet</span>()  <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">addProviderTiles</span>(<span class="st">&quot;OpenStreetMap.BlackAndWhite&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>), <span class="dt">pipe.data =</span> ., <span class="dt">tile =</span> <span class="st">&quot;none&quot;</span>)</code></pre></div>
<div id="htmlwidget-7da131889075ee209344" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-7da131889075ee209344">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap.BlackAndWhite",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5.5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"fitBounds":[40,0,50,10,[]],"limits":{"lat":[44.1415466667,48],"lng":[2,6.82978666667]}},"evals":[],"jsHooks":[]}</script>
<p>It is also possible to use some tools provided by <a href="https://github.com/RCura/leaflet.extras"><code>leaflet.extras</code> package</a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>leaflet.extras<span class="op">::</span><span class="kw">addDrawToolbar</span>()  <span class="op">%&gt;%</span>
<span class="st">  </span>leaflet.extras<span class="op">::</span><span class="kw">addStyleEditor</span>()</code></pre></div>
<div id="htmlwidget-90c23c032c339cf53aab" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-90c23c032c339cf53aab">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5.5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addDrawToolbar","args":[null,null,{"position":"topleft","draw":{"polyline":{"allowIntersection":true,"drawError":{"color":"#b00b00","timeout":2500},"guidelineDistance":20,"maxGuideLineLength":4000,"showLength":true,"metric":true,"feet":true,"nautic":false,"zIndexOffset":2000,"shapeOptions":{"stroke":true,"color":"#03f","weight":1,"opacity":1,"fill":false,"fillColor":"#03f","fillOpacity":0.4,"clickable":true,"smoothFactor":1,"noClip":true},"repeatMode":false},"polygon":{"showArea":false,"metric":true,"shapeOptions":{"stroke":true,"color":"#03f","weight":1,"opacity":1,"fill":true,"fillColor":"#03f","fillOpacity":0.4,"clickable":true,"smoothFactor":1,"noClip":true},"repeatMode":false},"circle":{"shapeOptions":{"stroke":true,"color":"#03f","weight":1,"opacity":1,"fill":true,"fillColor":"#03f","fillOpacity":0.4,"clickable":true,"smoothFactor":1,"noClip":true},"repeatMode":false,"showRadius":true,"metric":true,"feet":true,"nautic":false},"rectangle":{"showArea":true,"metric":true,"shapeOptions":{"stroke":true,"color":"#03f","weight":1,"opacity":1,"fill":true,"fillColor":"#03f","fillOpacity":0.4,"clickable":true,"smoothFactor":1,"noClip":true},"repeatMode":false},"marker":{"zIndexOffset":2000,"repeatMode":false},"circlemarker":{"stroke":true,"color":"#3388ff","weight":4,"opacity":0.5,"fill":true,"fillOpacity":0.2,"clickable":true,"zIndexOffset":2000,"repeatMode":false},"singleFeature":false},"edit":false}]},{"method":"addStyleEditor","args":[{"position":"topleft","openOnLeafletDraw":true,"useGrouping":false}]}],"limits":{"lat":[44.1415466667,48],"lng":[2,6.82978666667]}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>leaflet.extras<span class="op">::</span><span class="kw">addFullscreenControl</span>()</code></pre></div>
<div id="htmlwidget-aac6fff017f0f7fc9828" style="width:720px;height:326.4px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-aac6fff017f0f7fc9828">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false,"fullscreenControl":{"position":"topleft","pseudoFullscreen":false}},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5.5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[48,44.1415466667],[2,6.82978666667],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/fra' target='_blank'>French<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/oci' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[44.1415466667,48],"lng":[2,6.82978666667]}},"evals":[],"jsHooks":[]}</script>
<p>The <a href="https://github.com/r-spatial/mapview"><code>mapview</code> package</a> provides a possibility to create a multiple maps in a grid and even synchronise them. There are two functions for that: <code>latticeview()</code> and <code>sync()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m1 &lt;-<span class="st"> </span><span class="kw">map.feature</span>(<span class="kw">lang.aff</span>(<span class="st">&quot;Tsezic&quot;</span>), <span class="dt">label =</span> <span class="kw">lang.aff</span>(<span class="st">&quot;Tsezic&quot;</span>))
m2 &lt;-<span class="st"> </span><span class="kw">map.feature</span>(<span class="kw">lang.aff</span>(<span class="st">&quot;Avar-Andi&quot;</span>), <span class="dt">label =</span> <span class="kw">lang.aff</span>(<span class="st">&quot;Avar-Andi&quot;</span>))
<span class="kw">library</span>(mapview)
<span class="kw">sync</span>(m1, m2)</code></pre></div>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div id="htmlwidget-6334" style="width:100%;height:400px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-6334">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[42.410888,42.26458,42.1206,42.45022,42.08076,42.353471],[46.044877,45.80959,46.03319,45.80638,46.13691,46.107859],5.5,null,["","","","","",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/khv' target='_blank'>Inkhoqwari<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ddo' target='_blank'>Tsez<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kap' target='_blank'>Bezhta<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/gin' target='_blank'>Hinuq<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/huz' target='_blank'>Hunzib<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/khv' target='_blank'>Xvarshi<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[42.410888,42.26458,42.1206,42.45022,42.08076,42.353471],[46.044877,45.80959,46.03319,45.80638,46.13691,46.107859],5,null,["","","","","",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/khv' target='_blank'>Inkhoqwari<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ddo' target='_blank'>Tsez<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kap' target='_blank'>Bezhta<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/gin' target='_blank'>Hinuq<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/huz' target='_blank'>Hunzib<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/khv' target='_blank'>Xvarshi<\/a><br>"],null,["Inkhoqwari","Tsez","Bezhta","Hinuq","Hunzib","Xvarshi"],{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[42.08076,42.45022],"lng":[45.80638,46.13691]}},"evals":[],"jsHooks":[]}</script>
</div>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div id="htmlwidget-3176" style="width:100%;height:400px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3176">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[42.80785,42.74276,42.65005,42.40035,42.665,42.39664,42.50239,42.33164,42.43056],[46.29187,46.22524,46.31511,46.30369,46.22,46.1041,45.99496,45.92268,46.66639],5.5,null,["","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":"black","weight":5,"opacity":0.5,"fill":true,"fillColor":"black","fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/ani' target='_blank'>Andi<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/gdo' target='_blank'>Godoberi<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kpt' target='_blank'>Karata<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/akv' target='_blank'>Akhvakh<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bph' target='_blank'>Botlikh<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kva' target='_blank'>Bagvalal<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/cji' target='_blank'>Chamalal<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tin' target='_blank'>Tindi<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ava' target='_blank'>Avar<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[42.80785,42.74276,42.65005,42.40035,42.665,42.39664,42.50239,42.33164,42.43056],[46.29187,46.22524,46.31511,46.30369,46.22,46.1041,45.99496,45.92268,46.66639],5,null,["","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4","#1F77B4"],"fillOpacity":1},null,null,["<a href='http://glottolog.org/resource/languoid/iso/ani' target='_blank'>Andi<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/gdo' target='_blank'>Godoberi<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kpt' target='_blank'>Karata<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/akv' target='_blank'>Akhvakh<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/bph' target='_blank'>Botlikh<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/kva' target='_blank'>Bagvalal<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/cji' target='_blank'>Chamalal<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/tin' target='_blank'>Tindi<\/a><br>","<a href='http://glottolog.org/resource/languoid/iso/ava' target='_blank'>Avar<\/a><br>"],null,["Andi","Godoberi","Karata","Akhvakh","Botlikh","Bagvalal","Chamalal","Tindi","Avar"],{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[42.33164,42.80785],"lng":[45.92268,46.66639]}},"evals":[],"jsHooks":[]}</script>
</div>
<script>
HTMLWidgets.addPostRenderHandler(function() {
var leaf_widgets = {};
                Array.prototype.map.call(
                 document.querySelectorAll(".leaflet"),
                   function(ldiv){
                     if (HTMLWidgets.find("#" + ldiv.id) && HTMLWidgets.find("#" + ldiv.id).getMap()) {
                        leaf_widgets[ldiv.id] = HTMLWidgets.find("#" + ldiv.id).getMap();
                     }
                   }
                );
               

leaf_widgets['htmlwidget-3176'].sync(leaf_widgets['htmlwidget-6334'],{syncCursor: true, noInitialSync: true});
leaf_widgets['htmlwidget-6334'].sync(leaf_widgets['htmlwidget-3176'],{syncCursor: true, noInitialSync: true});

});
</script>
<p>Also there is a nice package <code>mapedit</code> that provide a possibility of creating and editing of leaflet objects by hand:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Russian&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>mapedit<span class="op">::</span><span class="kw">editMap</span>() -&gt;
<span class="st">  </span>my_polygone

<span class="kw">map.feature</span>(<span class="kw">c</span>(<span class="st">&quot;Adyghe&quot;</span>, <span class="st">&quot;Russian&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>leaflet<span class="op">::</span><span class="kw">addPolygons</span>(<span class="dt">data =</span> my_polygone<span class="op">$</span>finished)</code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/ropensci/lingtypology/master/docs/use_mapedit.gif" />

</div>
</div>
<div id="get-data-from-openstreetmap-with-overpass" class="section level3">
<h3>3. Get data from OpenStreetMap with <code>overpass</code></h3>
<p>This section is inspired by talk with <a href="https://github.com/nikopartanen">Niko Partanen</a> and his <a href="https://gist.github.com/nikopartanen/f5b4a325808ea8993bfb14b9f81cdfc1">gist</a>. <a href="https://github.com/hrbrmstr/overpass">Overpass</a> is a packge with tools to work with the OpenStreetMap (OSM) <a href="http://wiki.openstreetmap.org/wiki/Overpass_API">Overpass API</a>. Explore simple Overpass queries with <a href="http://overpass-turbo.eu/">overpass turbo</a>. Imagine that we need to get all settlements from Ingushetia, Daghestan and Chechnya. So, first, load a library:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(overpass)</code></pre></div>
<p>Create a query:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">settlements &lt;-<span class="st"> &#39;area[name~&quot;Дагестан|Ингушетия|Чечня&quot;];</span>
<span class="st">(node[&quot;place&quot;~&quot;city|village|town|hamlet&quot;](area););</span>
<span class="st">out;&#39;</span></code></pre></div>
<p>Pass the query to <code>overpass_query()</code> function and change the input result to dataframe:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">query_result &lt;-<span class="st"> </span><span class="kw">overpass_query</span>(settlements)
settlement_data &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(query_result[, <span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>, <span class="st">&quot;name&quot;</span>)])</code></pre></div>
<p>Some values could be <code>NA</code>, so I profer clean it with <code>complete.cases()</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">settlement_data &lt;-<span class="st"> </span>settlement_data[<span class="kw">complete.cases</span>(settlement_data),]</code></pre></div>
<p>On the last step, I will use a “fake” language argument to avoid the creation of some Glottolog links:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">map.feature</span>(<span class="dt">language =</span> <span class="st">&quot;fake&quot;</span>,
            <span class="dt">latitude =</span> settlement_data<span class="op">$</span>lat,
            <span class="dt">longitude =</span> settlement_data<span class="op">$</span>lon,
            <span class="dt">label =</span> settlement_data<span class="op">$</span>name)</code></pre></div>
<p>Results are not ideal: there are some villages Дагестанская and Красный Дагестан in Adygeya and Krasnodarskiy district, but the most points are correct. It is also possible to get all data from some polygone created with <code>mapedit</code> (see previous section).</p>
</div>
<div id="create-your-own-atlas-with-rmarkdown" class="section level3">
<h3>4. Create your own atlas with <code>rmarkdown</code></h3>
<p>This section is inspired by talk with <a href="https://github.com/nikopartanen">Niko Partanen</a>. It is possible to create an atlas website using <code>lingtypology</code> and <a href="https://github.com/rstudio/rmarkdown"><code>rmarkdown</code></a> packages. The function <code>atlas.database()</code> creates a folder in the working directory that contains an <code>rmarkdown</code> template for a web-site.</p>
<p>First, lets create a <code>dataframe</code> with some data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">wals.feature</span>(<span class="kw">c</span>(<span class="st">&quot;1a&quot;</span>, <span class="st">&quot;20a&quot;</span>))</code></pre></div>
<pre><code>## Don&#39;t forget to cite a source (modify in case of using individual chapters):
## 
## Dryer, Matthew S. &amp; Haspelmath, Martin (eds.) 2013. The World Atlas of Language Structures Online. Leipzig: Max Planck Institute for Evolutionary Anthropology.
## (Available online at http://wals.info, Accessed on 2018-06-12.)
## 
## @book{wals,
##   address   = {Leipzig},
##   editor    = {Matthew S. Dryer and Martin Haspelmath},
##   publisher = {Max Planck Institute for Evolutionary Anthropology},
##   title     = {WALS Online},
##   url       = {http://wals.info/},
##   year      = {2013}
## }</code></pre>
<p>Second we can create a website using <code>atlas.database()</code> function:</p>
<ul>
<li><code>languages</code> argument is a language list</li>
<li><code>features</code> argument is a data.frame with corresponding features</li>
<li><code>latitude</code> and <code>longitude</code> arguments are optional</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">atlas.database</span>(<span class="dt">languages =</span> df<span class="op">$</span>language,
               <span class="dt">features =</span> df[,<span class="kw">c</span>(<span class="dv">4</span><span class="op">:</span><span class="dv">5</span>)],
               <span class="dt">latitude =</span> df<span class="op">$</span>latitude,
               <span class="dt">longitude =</span> df<span class="op">$</span>longitude,
               <span class="dt">atlas_name =</span> <span class="st">&quot;Some WALS features&quot;</span>,
               <span class="dt">author =</span> <span class="st">&quot;Author Name&quot;</span>)</code></pre></div>
<p>We can see that this function creates a subfolder with following files:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list.files</span>(<span class="st">&quot;./atlas_Some_WALS_features/&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;1._1a.Rmd&quot;    &quot;2._20a.Rmd&quot;   &quot;database.csv&quot; &quot;footer.html&quot; 
## [5] &quot;index.Rmd&quot;    &quot;_site.yml&quot;</code></pre>
<p>The last step is to run a command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rmarkdown<span class="op">::</span><span class="kw">render_site</span>(<span class="st">&quot;./atlas_Some_WALS_features/&quot;</span>)</code></pre></div>
<p>Then the atlas website will be created (here is <a href="https://agricolamz.github.io/lingtypology_atlas_example/index.html">a result</a>). If you want to change something in the website, just change some files:</p>
<ul>
<li>write information about atlas in index.Rmd file</li>
<li>list citation information</li>
<li>change any <code>.Rmd</code> file</li>
<li>…</li>
<li>and on the end rerun the <code>rmarkdown::render_site(&quot;./atlas_Some_WALS_features/&quot;)</code> command.</li>
</ul>
</div>
<div id="create-.kml-file-using-sp-and-rgdal" class="section level3">
<h3>5. Create .kml file using <code>sp</code> and <code>rgdal</code></h3>
<p>.kml file is a common file type for geospatial data. This kind of files are used in <a href="https://en.wikipedia.org/wiki/Google_Earth">Google Earth</a>, <a href="http://www.gabmap.nl/">Gabmap</a> (a web application that visualizes dialect variations) and others. In order to produce a .kml file you need to have a dataset with coordinates such as <code>circassian</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sp<span class="op">::</span><span class="kw">coordinates</span>(circassian) &lt;-<span class="st"> </span><span class="er">~</span>longitude<span class="op">+</span>latitude
sp<span class="op">::</span><span class="kw">proj4string</span>(circassian) &lt;-<span class="st"> </span>sp<span class="op">::</span><span class="kw">CRS</span>(<span class="st">&quot;+proj=longlat +datum=WGS84&quot;</span>)
rgdal<span class="op">::</span><span class="kw">writeOGR</span>(circassian[<span class="st">&quot;village&quot;</span>],
                <span class="st">&quot;circassian.kml&quot;</span>, 
                <span class="dt">layer=</span><span class="st">&quot;village&quot;</span>,
                <span class="dt">driver=</span><span class="st">&quot;KML&quot;</span>)</code></pre></div>
</div>

<br>
<br>
<br>
<br>
<p> <center> &copy; G. Moroz code on
<a href="https://github.com/ropensci/lingtypology"> GitHub<img src="https://assets-cdn.github.com/images/modules/logos_page/GitHub-Mark.png"  style="width:30px;height:30px;border:0"> </center></p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
